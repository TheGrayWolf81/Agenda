<html>
  <head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=no">
    <link href="favicon.ico" rel="icon" type="image/x-icon" />
    <title>Agenda</title>

    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.light_blue-blue.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <style>
      td {
        white-space: normal;
      }
      body {
	background-image: url("bmwblur.jpg");
	background-size: cover;
	opacity: 0.75;
        filter: alpha(opacity=75); /* For IE8 and earlier */
	background-color: #F2F2F2;
      }
      table {
        background-color: #FCFCFC;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }
	   
      .info {
       background-color: #FFF9C4;
       border-left: 6px solid #FFF176;
	}
	    
      .mdl-tabs__tab-bar {
        width: 100vw;
        background-color: #FCFCFC;
        box-shadow: 0 0.2px 0.2px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }
      
      .mdl-tabs__panel {
        padding: 5vh;
      }

      .mdl-data-table {
        margin: auto;
      }

      .mdl-textfield {
        width: 100%;
      }
	    
      .mdl-button {
	background-color: #FCFCFC;
      }

      img {
	display: block;
        margin: auto;
        width: 65%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }
	    
      #bgChange {
	display: block;
        margin: auto;
        width: 15%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }

      #edit {
        margin: 5vh;
      }
      
      @import url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600);
	    
      /* The snackbar - position it at the bottom and in the middle of the screen */
#snackbar {
    visibility: hidden; /* Hidden by default. Visible on click */
    min-width: 250px; /* Set a default minimum width */
    margin-left: -125px; /* Divide value of min-width by 2 */
    background-color: #333; /* Black background color */
    color: #fff; /* White text color */
    text-align: center; /* Centered text */
    border-radius: 2px; /* Rounded borders */
    padding: 16px; /* Padding */
    position: fixed; /* Sit on top of the screen */
    z-index: 1; /* Add a z-index if needed */
    left: 50%; /* Center the snackbar */
    bottom: 30px; /* 30px from the bottom */
}

/* Show the snackbar when clicking on a button (class added with JavaScript) */
#snackbar.show {
    visibility: visible; /* Show the snackbar */

/* Add animation: Take 0.5 seconds to fade in and out the snackbar. 
However, delay the fade out process for 2.5 seconds */
    -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
    animation: fadein 0.5s, fadeout 0.5s 2.5s;
}

/* Animations to fade the snackbar in and out */
@-webkit-keyframes fadein {
    from {bottom: 0; opacity: 0;} 
    to {bottom: 30px; opacity: 1;}
}

@keyframes fadein {
    from {bottom: 0; opacity: 0;}
    to {bottom: 30px; opacity: 1;}
}

@-webkit-keyframes fadeout {
    from {bottom: 30px; opacity: 1;} 
    to {bottom: 0; opacity: 0;}
}

@keyframes fadeout {
    from {bottom: 30px; opacity: 1;}
    to {bottom: 0; opacity: 0;}
}

body {
	font-family:"Open Sans", Helvetica, Arial, sans-serif;
	font-weight:300;
	font-size: 12px;
	line-height:30px;
	color:#777;
}
      
    </style>
  </head>
  <body>
    <main class="mdl-layout__content">
      <div id="main" class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
        <div class="mdl-tabs__tab-bar">
          <a href="#agenda" class="mdl-tabs__tab is-active">Agenda</a>
	  <!--<a href="#notes" class="mdl-tabs__tab">Notes</a>-->
          <a href="#about" class="mdl-tabs__tab">About</a>
	  <a href="#settings" class="mdl-tabs__tab">Settings</a>
        </div>

        <div class="mdl-tabs__panel is-active" id="agenda">
          <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable">
            <thead>
              <tr>
                <th class="mdl-data-table__cell--non-numeric">Class</th>
                <th class="mdl-data-table__cell--non-numeric">Teacher</th>
                <th>Room #</th>
                <th class="mdl-data-table__cell--non-numeric">Homework</th>
              </tr>
            </thead>
            <tbody id="classes"></tbody>
          </table>
        </div>
	      
        <div class="mdl-tabs__panel" id="about">
          <span class="mdl-layout-title">Agenda</span>
          <br>
          Created by <a href="https://www.youtube.com/channel/UCWa--6L7aAcTJInaX9hh4xg">Richard Yanchev</a> and <a href="https://theandroidmaster.github.io/">James Fenn</a>.
          <br>
	  <br>
	<button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" onclick="helpToast()">Help</button>

	<div id="snackbar">Double click a row on the table to edit its fields.</div>
	</div>
	   
	<div class="mdl-tabs__panel" id="notes">
		<span class="mdl-layout-title">Notes</span>
		<br>
		<div class="info">
  		<p><strong> Info!</strong> Notes are coming soon...</p>
		</div>
		<br>
		<img src="notes_concept.png">
	</div>
	      
	<div class="mdl-tabs__panel" id="settings">
	  <span class="mdl-layout-title">Settings</span>
	  <br>
	  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch">
          <input type="checkbox" id="switch" class="mdl-switch__input" onclick="changeColor()">
          <span class="mdl-switch__label">Dark Mode</span>
          </label>
	  <br>
	  <br>
	  <!-- Raised button with ripple -->
	  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" onclick="resetWarning()">Reset</button>
	  <br>
		
	  <input type="image" onclick="bgBMWblur()" id="bgChange" src="bmwblur.jpg"/>
	  <input type="image" onclick="bgAppleblurlite()" id="bgChange" src="appleblurlite.jpg"/>
	  <input type="image" onclick="bgOrangeblurlite()" id="bgChange" src="orangeblurlite.jpg"/>
	</div>
	      
       </div>
	    
      <div id="edit" style="display: none;">
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="name">
          <label class="mdl-textfield__label" for="name">Class Name</label>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="teacher">
          <label class="mdl-textfield__label" for="teacher">Teacher</label>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="room">
          <label class="mdl-textfield__label" for="room">Room Number</label>
          <span class="mdl-textfield__error">Input is not a whole number!</span>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="homework">
          <label class="mdl-textfield__label" for="homework">Homework</label>
        </div>

        <button type="button" class="mdl-button" onclick="cancelEdit();">Cancel</button>
        <button id="save" type="button" class="mdl-button" onClick="history.go(0)">Save</button>
      </div>
    </main>
  </body>
  <script>
  var classes = [
    {
      name: "Period 1",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 2",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 3",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 4",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 5",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 6",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 7",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 8",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 9",
      teacher: "",
      room: 0,
      homework: ""
    }
  ];  
	
  function bgOrangeblurlite() {
  	document.body.style.backgroundImage = "url('orangeblurlite.png')";
  }
	  
  function bgAppleblurlite() {
  	document.body.style.backgroundImage = "url('appleblurlite.png')";
  }
	  
  function bgBMWblur() {
  	document.body.style.backgroundImage = "url('bmwblur.png')";
  }
	  
  function themeChange() {
  	$(".mdl-tabs__tab-bar").style.color = "#545556";
  }
	  
  function helpToast() {
    // Get the snackbar DIV
    var x = document.getElementById("snackbar")

    // Add the "show" class to DIV
    x.className = "show";

    // After 3 seconds, remove the show class from DIV
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
	}
	  
	  
  function loadClasses() {
    if (typeof(Storage) !== "undefined") {
      var stored = localStorage.getItem("classes");
      if (stored != null) classes = JSON.parse(stored);
    }

    var HTML = "";
    classes.forEach(function(item, index, array) {
      HTML += getTableItem(item);
    });
	  
    var element = document.getElementById("classes");
    element.innerHTML = HTML;
    componentHandler.upgradeElement(element);
  }

  function resetWarning(){
	if (confirm('Are you sure you want to delete all existing data from Agenda?\nThis will delete ALL user input!')) {
    		// Delete it!
	} 
	else {
    		// Do nothing!
	}
  }
	  
  function getTableItem(item) {
    return "<tr ondblclick=\"edit(classes[" + classes.indexOf(item) + "]);\"><td class=\"mdl-data-table__cell--non-numeric\">" + item.name + "</td><td class=\"mdl-data-table__cell--non-numeric\">" + item.teacher + "</td><td>" + item.room + "</td><td class=\"mdl-data-table__cell--non-numeric\">" + item.homework + "</td></tr>";
  }

  function edit(item) {
    document.getElementById("edit").style.display = null;
    document.getElementById("main").style.display = "none";

    document.getElementById("name").parentElement.MaterialTextfield.change(item.name);
    document.getElementById("teacher").parentElement.MaterialTextfield.change(item.teacher);
    document.getElementById("room").parentElement.MaterialTextfield.change(item.room);
    document.getElementById("homework").parentElement.MaterialTextfield.change(item.homework);

    document.getElementById("save").onclick = function() {
      saveEdit(item);
    }
  }

  function saveEdit(item) {
    document.getElementById("edit").style.display = "none";
    document.getElementById("main").style.display = null;

    item.name = document.getElementById("name").value;
    item.teacher = document.getElementById("teacher").value;
    item.room = document.getElementById("room").value;
    item.homework = document.getElementById("homework").value;

    saveClasses();
  }

  function cancelEdit() {
    document.getElementById("edit").style.display = "none";
    document.getElementById("main").style.display = null;
  }

  function saveClasses() {
    if (typeof(Storage) !== "undefined") {
      localStorage.setItem("classes", JSON.stringify(classes));
      location.reload();
    } else {
      alert("You are not currently using a supported browser. Please update your browser or switch to a less outdated piece of trash.");
    }

    loadClasses();
  }

  loadClasses();
  </script>
</html>
