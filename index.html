<html>
  <head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=no">
    <link href="favicon.ico" rel="icon" type="image/x-icon" />
    <title>Agenda</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.light_blue-blue.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <style>
      td {
        white-space: normal;
      }
      body {
	background-attachment: fixed;
	background-image: url("Background.2e16d0ba.fill-1422x800.jpg");
	background-size: cover;
	/*background-repeat: repeat-y; */ /*tile background*/
	background-color: white;
	opacity: 0.75;
        filter: alpha(opacity=75); /* For IE8 and earlier */
	background-color: #F2F2F2;
      }
      table {
        background-color: #FCFCFC;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }
	    
      .info {
       background-color: #FFF9C4;
       border-left: 6px solid #FFF176;
	}
	    
      .mdl-tabs__tab-bar {
	position:fixed;
        width: 100vw;
        background-color: #FCFCFC;
        box-shadow: 0 0.2px 0.2px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
	z-index:1;
      }
      
      .mdl-tabs__panel {
        padding: 5vh;
      }

      .mdl-data-table {
        margin: auto;
	z-index:0;
      }

      .mdl-textfield {
        width: 100%;
      }
	    
      .mdl-button {
	/*background-color: #FF0000;- !*/
      }
	    
      .mdl-progress {
	    	position:fixed;
		bottom:0;
		left:0;
      }

      img {
	display: block;
        margin: auto;
        width: 65%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }
	    
      /*#bgChange {
	display: block;
        margin: auto;
        width: 15%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }*/

      #edit {
        margin: 5vh;
      }
	    
	#rowBtn {
		position:fixed;
		bottom:15;
		right:15;
	    } 
      
      @import url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600);

@keyframes fadein {
    from {bottom: 0; opacity: 0;}
    to {bottom: 30px; opacity: 1;}
}

@-webkit-keyframes fadeout {
    from {bottom: 30px; opacity: 1;} 
    to {bottom: 0; opacity: 0;}
}

@keyframes fadeout {
    from {bottom: 30px; opacity: 1;}
    to {bottom: 0; opacity: 0;}
}

body {
	font-family:"Open Sans", Helvetica, Arial, sans-serif;
	font-weight:300;
	font-size: 12px;
	line-height:30px;
	color:#777;
}
      
    </style>
  </head>
  <body id=pageBody>
    <main class="mdl-layout__content">
      <div id="main" class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
        <div id="mdl-tabs__tab-bar" class="mdl-tabs__tab-bar">
          <a href="#agenda" class="mdl-tabs__tab is-active">Agenda</a>
	  <!--<a href="#notes" class="mdl-tabs__tab">Notes</a>-->
          <a href="#about" class="mdl-tabs__tab">About</a>
	  <a href="#settings" class="mdl-tabs__tab">Settings</a>
        </div>
      
        <div class="mdl-tabs__panel is-active" id="agenda">
          <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable"> 
            <thead>
              <tr>
                <th class="mdl-data-table__cell--non-numeric">Class</th>
                <th class="mdl-data-table__cell--non-numeric">Teacher</th>
                <th>Room #</th>
                <th class="mdl-data-table__cell--non-numeric">Homework</th>
              </tr>
            </thead>
            <tbody id="classes"></tbody>
          </table>
	
	<div id="rowBtn">
	<button id=btnAdd class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored">
  	<i class="material-icons">add</i>
	</button>
	</div>	
		
	 <!-- Simple MDL Progress Bar -->
	<div id="p1" class="mdl-progress mdl-js-progress"></div>	
        </div>     
	      
        <div class="mdl-tabs__panel" id="about">
          <span class="mdl-layout-title">Agenda</span>
          <br>
          Created by
	<ul class="demo-list-icon mdl-list">
  	<li class="mdl-list__item">
    	<span class="mdl-list__item-primary-content">
    	<i class="material-icons mdl-list__item-icon">person</i>
    	Richard Yanchev
	</span>
  	</li>
  	<li class="mdl-list__item">
    	<span class="mdl-list__item-primary-content">
    	<i class="material-icons mdl-list__item-icon">person</i>
    	James Fenn
  	</span>
  	</li>
	<br>	
	<!-- Contact Chip | Version number -->
	<span class="mdl-chip mdl-chip--contact">
  	<span class="mdl-chip__contact mdl-color--blue mdl-color-text--white">v</span>
   	<span class="mdl-chip__text">Beta 0.5</span>
	</span>
		
	</div>
	   
	<div class="mdl-tabs__panel" id="notes">
		<span class="mdl-layout-title">Notes</span>
		<br>
		<div class="info">
  		<p><strong> Info!</strong> Notes are coming soon...</p>
		</div>
		<br>
		<img src="notes_concept.png">
	</div>
	      
	<div class="mdl-tabs__panel" id="settings">
	  <span class="mdl-layout-title">Settings</span>
	  <br>
	  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch">
          <input type="checkbox" id="switch" class="mdl-switch__input" onclick="bgChange()">
          <span class="mdl-switch__label">Dark Mode</span>
          </label>
	  <br>
	  <br>
	  <!-- Raised button with ripple -->
	  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" onclick="resetWarning()">Reset</button>
	  <br>
	</div>
	      
       </div>
	    
      <div id="edit" style="display: none;">
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="name">
          <label class="mdl-textfield__label" for="name">Class Name</label>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="teacher">
          <label class="mdl-textfield__label" for="teacher">Teacher</label>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="room">
          <label class="mdl-textfield__label" for="room">Room Number</label>
          <span class="mdl-textfield__error">Input is not a whole number!</span>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input class="mdl-textfield__input" type="text" id="homework">
          <label class="mdl-textfield__label" for="homework">Homework</label>
        </div>

        <button type="button" class="mdl-button" onclick="cancelEdit();">Cancel</button>
        <button id="save" type="button" class="mdl-button" onClick="history.go(0)">Save</button>
      </div>
    </main>
  </body>
  <script>
  var classes = [
    {
      name: "Period 1",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 2",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 3",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 4",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 5",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 6",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 7",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 8",
      teacher: "",
      room: 0,
      homework: ""
    },
    {
      name: "Period 9",
      teacher: "",
      room: 0,
      homework: ""
    }
  ];  
	   
  function loadClasses() {
    if (typeof(Storage) !== "undefined") {
      var stored = localStorage.getItem("classes");
      if (stored != null) classes = JSON.parse(stored);
    }

    var HTML = "";
    classes.forEach(function(item, index, array) {
      HTML += getTableItem(item);
    });
	  
    var element = document.getElementById("classes");
    element.innerHTML = HTML;
    componentHandler.upgradeElement(element);
  }	  
	  
 /* function bgChange(){
  	document.body.style.background = ;
  }  */

  function resetWarning(){
	if (confirm('Are you sure you want to delete all existing data from Agenda?\nThis will delete ALL user input!')) {
    		// Delete it!
	} 
	else {
    		// Do nothing!
	}
  }
	  
  function getTableItem(item) {
    return "<tr ondblclick=\"edit(classes[" + classes.indexOf(item) + "]);\"><td class=\"mdl-data-table__cell--non-numeric\">" + item.name + "</td><td class=\"mdl-data-table__cell--non-numeric\">" + item.teacher + "</td><td>" + item.room + "</td><td class=\"mdl-data-table__cell--non-numeric\">" + item.homework + "</td></tr>";
  }

  function edit(item) {
    document.getElementById("edit").style.display = null;
    document.getElementById("main").style.display = "none";

    document.getElementById("name").parentElement.MaterialTextfield.change(item.name);
    document.getElementById("teacher").parentElement.MaterialTextfield.change(item.teacher);
    document.getElementById("room").parentElement.MaterialTextfield.change(item.room);
    document.getElementById("homework").parentElement.MaterialTextfield.change(item.homework);

    document.getElementById("save").onclick = function() {
      saveEdit(item);
    }
  }

  function saveEdit(item) {
    document.getElementById("edit").style.display = "none";
    document.getElementById("main").style.display = null;

    item.name = document.getElementById("name").value;
    item.teacher = document.getElementById("teacher").value;
    item.room = document.getElementById("room").value;
    item.homework = document.getElementById("homework").value;

    saveClasses();
  }

  function cancelEdit() {
    document.getElementById("edit").style.display = "none";
    document.getElementById("main").style.display = null;
  }

  function saveClasses() {
    if (typeof(Storage) !== "undefined") {
      localStorage.setItem("classes", JSON.stringify(classes));
      location.reload();
    } else {
      alert("You are not currently using a supported browser. Please update your browser or switch to a less outdated piece of trash.");
    }

    loadClasses();
  }

  loadClasses();
  </script>
</html>
